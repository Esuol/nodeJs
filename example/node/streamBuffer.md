# Stream && Buffer

## 为何要“一点一点”的？

你去视频网站看电影，去下载比较大的软件安装包，或者上传电影、软件包到云盘，这些文件都是动辄几个 G 大小，对吧？然而，我们的内存、网络、硬盘读写都是有速度或者大小的限制的，不可能随便的“生吞活剥”任何大文件，于是不得不“一点一点”的。

就像我们吃东西。我们牙齿的咀嚼食物的速度是有限制的，食道和食管也是有限制的，这种情况下，我们吃任何大小的东西，都得“一点一点”的来，无论是大馒头还是小包子。

专业一点说：一次性读取、操作大文件，内存和网络是“吃不消”的。

## 如何才能“一点一点”的？

```js
req.on('data', function (chunk) {
    // “一点一点”接收内容
    data += chunk.toString()
})
req.on('end', function () {

})
```

如上代码，我们已经知道了on是监听事件的触发，分别监听data和end两个事件。顾名思义，data就是有数据传递过来的事件，end就是结束的事件。那就可以通过这段代码回答这个问题。

如何做到“一点一点”的？—— 有数据传递过来就触发data事件，接收到这段数据，暂存下来，最后待数据全部传递完了触发end事件。为何要在上一节先把事件机制给讲了？因为这儿就是一句事件机制才能实现。

